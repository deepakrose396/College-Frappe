{"version":3,"file":"ApplicationForm-dazxJs4S.js","sources":["../../../../frontend/src/components/ApplicationForm.vue"],"sourcesContent":["<template>\n    <div class=\"p-6 max-w-md mx-auto space-y-4\">\n        <h2 class=\"text-xl font-bold\">Application Form</h2>\n\n        <Input type=\"text\" size=\"sm\" label=\"First Name\" variant=\"subtle\" placeholder=\"First Name\"\n            v-model=\"form.first_name\" required />\n        <Input type=\"text\" size=\"sm\" label=\"Last Name\" variant=\"subtle\" placeholder=\"Last Name\"\n            v-model=\"form.last_name\" />\n        <Input type=\"email\" size=\"sm\" label=\"Email\" variant=\"subtle\" placeholder=\"Email\" v-model=\"form.email\" />\n        <Input type=\"text\" size=\"sm\" label=\"Phone\" variant=\"subtle\" placeholder=\"Phone\" v-model=\"form.phone\" />\n\n        <Input type=\"select\" size=\"sm\" label=\"Department\" variant=\"subtle\" v-model=\"form.department\"\n            :options=\"departments\" />\n\n        <Input type=\"text\" size=\"sm\" label=\"Program\" variant=\"subtle\" v-model=\"form.program\" readonly />\n\n\n        <Input type=\"checkbox\" size=\"sm\" label=\"Paid\" variant=\"subtle\" v-model=\"form.paid\" />\n\n        <Button variant=\"solid\" theme=\"gray\" size=\"sm\" label=\"Submit\" @click=\"submitForm\">\n            Submit\n        </Button>\n    </div>\n    <Dialog :options=\"{\n        title: 'Modal Dialog',\n        message: 'data succuss',\n        actions: [\n            {\n                label: 'Close',\n                variant: 'solid',\n            },\n        ],\n    }\" :disable-outside-click-to-close=\"true\" v-model=\"dialog5\" />\n</template>\n\n<script setup>\nimport { ref, computed, watch } from \"vue\";\nimport { Input, Button, createResource, Dialog } from \"frappe-ui\";\n\nconst dialog5 = ref(false);\n\nconst form = ref({\n    first_name: \"\",\n    last_name: \"\",\n    email: \"\",\n    phone: \"\",\n    department: \"\",\n    program: \"\",\n    academic_year: null,   // default\n    paid: false,\n});\n\n// Fetch academic year\nconst academic = createResource({\n    url: 'collage.api.academic_year.get_academic',\n    method: 'GET',\n    auto: true\n});\n\n// Watch academic resource and update form\nconst academicData = computed(() => academic.data ? academic.data[0] : null);\n\nwatch(academicData, (newVal) => {\n    if (newVal) {\n        form.value.academic_year = newVal.academic_year ;\n    }\n});\n\nconst submitForm = async () => {\n    console.log(form.value);\n    \n    try {\n        const response = await fetch(\"/api/method/collage.api.applicant.submit_student_applicant\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(form.value)\n        });\n        const data = await response.json();\n        if (data.message) {\n            dialog5.value = true;   // âœ… fix: must use .value\n            console.log(\"Success:\", data.message);\n\n            form.value = {\n                first_name: \"\",\n                last_name: \"\",\n                email: \"\",\n                phone: \"\",\n                department: \"\",\n                program: \"\",\n                academic_year: null,\n                paid: false\n            };\n        }\n    } catch (err) {\n        alert(\"Error submitting form:\", err);\n    }\n};\n\n// Fetch departments\nconst userResource = createResource({\n    url: 'collage.api.department.get_departments',\n    method: 'GET',\n    auto: true\n});\n\nconst departments = computed(() => {\n    if (!userResource.data) return [];\n    return userResource.data.map(d => ({\n        label: d.department,\n        value: d.department,\n        program: d.program\n    }));\n});\n\n// Watch selected department and update program\nwatch(() => form.value.department, (selectedDept) => {\n    const dept = departments.value.find(d => d.value === selectedDept);\n    form.value.program = dept ? dept.program : \"\";\n});\n</script>\n\n"],"names":["dialog5","ref","form","academic","createResource","academicData","computed","watch","newVal","submitForm","__async","data","err","userResource","departments","d","selectedDept","dept","_createElementVNode","_hoisted_1","_cache","_createVNode","_unref","Input","$event","Button","Dialog"],"mappings":"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"}