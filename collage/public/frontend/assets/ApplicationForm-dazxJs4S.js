var v=(c,r,a)=>new Promise((n,d)=>{var p=l=>{try{u(a.next(l))}catch(e){d(e)}},i=l=>{try{u(a.throw(l))}catch(e){d(e)}},u=l=>l.done?n(l.value):Promise.resolve(l.value).then(p,i);u((a=a.apply(c,r)).next())});import{r as b,c as g,j as V,k as f,b as x,o as _,d as y,e as o,u as s,I as m,w as z,f as N,l as U,D as F,F as k}from"./index-BmA6OMtU.js";const E={class:"p-6 max-w-md mx-auto space-y-4"},P={__name:"ApplicationForm",setup(c){const r=b(!1),a=b({first_name:"",last_name:"",email:"",phone:"",department:"",program:"",academic_year:null,paid:!1}),n=g({url:"collage.api.academic_year.get_academic",method:"GET",auto:!0}),d=V(()=>n.data?n.data[0]:null);f(d,l=>{l&&(a.value.academic_year=l.academic_year)});const p=()=>v(this,null,function*(){console.log(a.value);try{const e=yield(yield fetch("/api/method/collage.api.applicant.submit_student_applicant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.value)})).json();e.message&&(r.value=!0,console.log("Success:",e.message),a.value={first_name:"",last_name:"",email:"",phone:"",department:"",program:"",academic_year:null,paid:!1})}catch(l){alert("Error submitting form:",l)}}),i=g({url:"collage.api.department.get_departments",method:"GET",auto:!0}),u=V(()=>i.data?i.data.map(l=>({label:l.department,value:l.department,program:l.program})):[]);return f(()=>a.value.department,l=>{const e=u.value.find(t=>t.value===l);a.value.program=e?e.program:""}),(l,e)=>(_(),x(k,null,[y("div",E,[e[9]||(e[9]=y("h2",{class:"text-xl font-bold"},"Application Form",-1)),o(s(m),{type:"text",size:"sm",label:"First Name",variant:"subtle",placeholder:"First Name",modelValue:a.value.first_name,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.first_name=t),required:""},null,8,["modelValue"]),o(s(m),{type:"text",size:"sm",label:"Last Name",variant:"subtle",placeholder:"Last Name",modelValue:a.value.last_name,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.last_name=t)},null,8,["modelValue"]),o(s(m),{type:"email",size:"sm",label:"Email",variant:"subtle",placeholder:"Email",modelValue:a.value.email,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.email=t)},null,8,["modelValue"]),o(s(m),{type:"text",size:"sm",label:"Phone",variant:"subtle",placeholder:"Phone",modelValue:a.value.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.phone=t)},null,8,["modelValue"]),o(s(m),{type:"select",size:"sm",label:"Department",variant:"subtle",modelValue:a.value.department,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.department=t),options:u.value},null,8,["modelValue","options"]),o(s(m),{type:"text",size:"sm",label:"Program",variant:"subtle",modelValue:a.value.program,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.program=t),readonly:""},null,8,["modelValue"]),o(s(m),{type:"checkbox",size:"sm",label:"Paid",variant:"subtle",modelValue:a.value.paid,"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.paid=t)},null,8,["modelValue"]),o(s(U),{variant:"solid",theme:"gray",size:"sm",label:"Submit",onClick:p},{default:z(()=>[...e[8]||(e[8]=[N(" Submit ",-1)])]),_:1})]),o(s(F),{options:{title:"Modal Dialog",message:"data succuss",actions:[{label:"Close",variant:"solid"}]},"disable-outside-click-to-close":!0,modelValue:r.value,"onUpdate:modelValue":e[7]||(e[7]=t=>r.value=t)},null,8,["modelValue"])],64))}};export{P as default};
//# sourceMappingURL=ApplicationForm-dazxJs4S.js.map
